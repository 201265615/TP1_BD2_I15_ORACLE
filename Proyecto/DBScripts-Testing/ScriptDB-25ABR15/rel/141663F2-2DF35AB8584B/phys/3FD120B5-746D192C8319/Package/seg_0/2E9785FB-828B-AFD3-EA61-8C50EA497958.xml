<?xml version = '1.0' encoding = 'UTF-8'?>
<PackageOracle class="oracle.dbtools.crest.model.design.storage.oracle.PackageOracle" name="PKG_ARTICULO" directorySegmentName="seg_0" id="2E9785FB-828B-AFD3-EA61-8C50EA497958">
<sourceConnName>oraserveri-proyectopdb-mviales</sourceConnName>
<sourceObjSchema>MVIALES</sourceObjSchema>
<sourceObjName>PKG_ARTICULO</sourceObjName>
<createdBy>riho</createdBy>
<createdTime>2015-04-25 21:44:29 UTC</createdTime>
<ownerDesignName>ScriptDB-25ABR15</ownerDesignName>
<owner>3919DA2A-C451-AB45-1584-FB489057BDD4</owner>
<source>CREATE OR REPLACE PACKAGE MVIALES.PKG_ARTICULO AS&lt;br/&gt;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- DECLARA TIPOS VISIBLES&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    TYPE RECARTICULO IS RECORD (CODIGO VARCHAR2(20), DESCRIPCION VARCHAR2(40));&lt;br/&gt;    CURSOR CURARTICULO RETURN RECARTICULO;&lt;br/&gt;    &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;    PROCEDURE SP_InsertarArticulo (&lt;br/&gt;        IN_CODIGO IN VARCHAR2, &lt;br/&gt;        IN_DESCRIPCION IN VARCHAR2, &lt;br/&gt;        IN_UNDMEDIDA IN NUMBER, &lt;br/&gt;        IN_CODMARCA IN NUMBER,&lt;br/&gt;        IN_MODELO IN VARCHAR2, &lt;br/&gt;        IN_CODFAMILIA IN NUMBER, &lt;br/&gt;        IN_CODESTARTICULO IN NUMBER,&lt;br/&gt;        IN_CODUSERREGISTRO IN VARCHAR2,&lt;br/&gt;        IN_CANTIDAD IN NUMBER, &lt;br/&gt;        IN_CANTMAXIMA IN NUMBER, &lt;br/&gt;        IN_CANTMINIMA IN NUMBER, &lt;br/&gt;        IN_PRECIOMERCDOLARES IN NUMBER);&lt;br/&gt;  &lt;br/&gt;    PROCEDURE SP_InsertarComponente (&lt;br/&gt;        IN_CODIGOCOMPONENTE IN VARCHAR2,&lt;br/&gt;        IN_CODIGOARTICULO IN VARCHAR2);&lt;br/&gt;    &lt;br/&gt;    PROCEDURE SP_ModificarArticulo (&lt;br/&gt;        IN_CODIGO IN VARCHAR2, &lt;br/&gt;        IN_CODUSERREGISTRO IN VARCHAR2, &lt;br/&gt;        IN_PRECIOMERCDOLARES IN NUMBER);&lt;br/&gt;    &lt;br/&gt;    PROCEDURE SP_ModificarComponente (&lt;br/&gt;        IN_CODCOMPONENTE IN VARCHAR2,&lt;br/&gt;        IN_CODARTICULO IN VARCHAR2);&lt;br/&gt;    &lt;br/&gt;    PROCEDURE SP_BorrarComponente (&lt;br/&gt;        IN_CODCOMPONENTE IN VARCHAR2,&lt;br/&gt;        IN_CODARTICULO IN VARCHAR2);&lt;br/&gt;    &lt;br/&gt;    Procedure SP_GetArticulos;&lt;br/&gt;    &lt;br/&gt;    Procedure SP_GetComponentes;&lt;br/&gt;    &lt;br/&gt;    &lt;br/&gt;    -- ============================================================================================&lt;br/&gt;    -- TESTING RETURNS&lt;br/&gt;    -- ============================================================================================&lt;br/&gt;    FUNCTION FUN_GETARTICULOS_V3 RETURN RECARTICULO;&lt;br/&gt;    -- ============================================================================================  &lt;br/&gt;&lt;br/&gt;END PKG_Articulo;</source>
<body class="oracle.dbtools.crest.model.design.storage.oracle.PackageBodyOracle" name="PKG_ARTICULO" id="2E9785FB-828B-AFD3-EA61-8C50EA497958">
<sourceConnName>oraserveri-proyectopdb-mviales</sourceConnName>
<sourceObjSchema>MVIALES</sourceObjSchema>
<sourceObjName>PKG_ARTICULO</sourceObjName>
<createdBy>riho</createdBy>
<createdTime>2015-04-25 21:44:30 UTC</createdTime>
<ownerDesignName>ScriptDB-25ABR15</ownerDesignName>
<owner>3919DA2A-C451-AB45-1584-FB489057BDD4</owner>
<source>CREATE OR REPLACE PACKAGE BODY MVIALES.PKG_ARTICULO AS&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- DEFINE TIPOS VISIBLES&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    CURSOR CURARTICULO RETURN RECARTICULO IS&lt;br/&gt;      SELECT&lt;br/&gt;        TA.CODIGO,&lt;br/&gt;        TA.DESCRIPCION&lt;br/&gt;      FROM T_ARTICULOS TA;&lt;br/&gt;      &lt;br/&gt;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Insercion Articulos&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_InsertarArticulo (&lt;br/&gt;      IN_CODIGO IN VARCHAR2,&lt;br/&gt;      IN_DESCRIPCION IN VARCHAR2,&lt;br/&gt;      IN_UNDMEDIDA IN NUMBER,&lt;br/&gt;      IN_CODMARCA IN NUMBER,&lt;br/&gt;      IN_MODELO IN VARCHAR2, &lt;br/&gt;      IN_CODFAMILIA IN NUMBER, &lt;br/&gt;      IN_CODESTARTICULO IN NUMBER,&lt;br/&gt;      IN_CODUSERREGISTRO IN VARCHAR2, &lt;br/&gt;      IN_CANTIDAD IN NUMBER, &lt;br/&gt;      IN_CANTMAXIMA IN NUMBER, &lt;br/&gt;      IN_CANTMINIMA IN NUMBER,&lt;br/&gt;      IN_PRECIOMERCDOLARES IN NUMBER)&lt;br/&gt;    AS&lt;br/&gt;    BEGIN&lt;br/&gt;      INSERT INTO t_articulos(CODIGO, DESCRIPCION, UNDMEDIDA, CODMARCA, MODELO, FECREGISTRO, CODFAMILIA, CODESTARTICULO, CODUSERREGISTRO, CANTIDAD, CANTMAXIMA, CANTMINIMA, PRECIOMERCDOLARES, FECHAACTPRECIO)&lt;br/&gt;      VALUES(IN_CODIGO, IN_DESCRIPCION, IN_UNDMEDIDA, IN_CODMARCA, IN_MODELO, sysdate, IN_CODFAMILIA, IN_CODESTARTICULO, IN_CODUSERREGISTRO, IN_CANTIDAD, IN_CANTMAXIMA, IN_CANTMINIMA, IN_PRECIOMERCDOLARES, sysdate);&lt;br/&gt;    END;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Insercion Componentes&lt;br/&gt;    -- Requiere el codigo de componente y el codigo del articulo al cual se asociara, e.g execute SP_INSERTARCOMPONENTE(&apos;FTCO2175&apos;,&apos;INCOHO&apos;);&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_InsertarComponente (&lt;br/&gt;      IN_CODIGOCOMPONENTE IN VARCHAR2,&lt;br/&gt;      IN_CODIGOARTICULO IN VARCHAR2)&lt;br/&gt;    AS&lt;br/&gt;    BEGIN&lt;br/&gt;      INSERT INTO t_componentes(CODCOMPONENTE,CODARTICULO)&lt;br/&gt;      VALUES (IN_CODIGOCOMPONENTE, IN_CODIGOARTICULO);&lt;br/&gt;    END;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Modificacion Articulos&lt;br/&gt;    -- Requiere el codigo de articulo por modificar, el usuario e.g &apos;admin&apos; y el precio nuevo en dolares, la fecha se cambia sola, e.g execute SP_ModificarArticulo(&apos;MOCO4075&apos;,&apos;admin&apos;,200);&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_ModificarArticulo (&lt;br/&gt;      IN_CODIGO IN VARCHAR2,&lt;br/&gt;      IN_CODUSERREGISTRO IN VARCHAR2,&lt;br/&gt;      IN_PRECIOMERCDOLARES IN NUMBER)&lt;br/&gt;    AS&lt;br/&gt;    BEGIN&lt;br/&gt;      UPDATE  t_articulos &lt;br/&gt;      SET CODUSERREGISTRO = IN_CODUSERREGISTRO,&lt;br/&gt;          PRECIOMERCDOLARES = IN_PRECIOMERCDOLARES,&lt;br/&gt;          FECHAACTPRECIO = sysdate&lt;br/&gt;          WHERE CODIGO = IN_CODIGO;&lt;br/&gt;    END;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Modificacion Componentes&lt;br/&gt;    -- Requiere el codigo de componente por modificar y el codigo nuevo del articulo al cual se asociara, e.g execute SP_MODIFICARCOMPONENTE(&apos;FP110&apos;,&apos;SL02.8G08ME500SSD&apos;);&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_ModificarComponente (&lt;br/&gt;      IN_CODCOMPONENTE IN VARCHAR2,&lt;br/&gt;      IN_CODARTICULO IN VARCHAR2)&lt;br/&gt;    AS&lt;br/&gt;    BEGIN&lt;br/&gt;      UPDATE  t_componentes&lt;br/&gt;      SET CODARTICULO = IN_CODARTICULO&lt;br/&gt;          WHERE CODCOMPONENTE = IN_CODCOMPONENTE;&lt;br/&gt;    END;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Borrado Articulo&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Borrado Componente&lt;br/&gt;    -- Si se desea borrar solo una linea en especifico (un componente esta asociado a un articulo X) se pasa de parametro el codigo del componente por eliminar y el codigo del articulo asociado, e.g execute SP_BORRARCOMPONENTE(&apos;FTCO2175&apos;,&apos;SL02.8G08ME500SSD&apos;);&lt;br/&gt;    -- Si se desea borrar todas las entradas donde se encuentr el componente se pasa de parametro el codigo del componente por eliminar y un parametro null (&apos;&apos;) como segundo parametro, e.g execute SP_BorrarComponente(&apos;FTCO2175&apos;,&apos;&apos;);&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_BorrarComponente (&lt;br/&gt;      IN_CODCOMPONENTE IN VARCHAR2,&lt;br/&gt;      IN_CODARTICULO IN VARCHAR2)&lt;br/&gt;    AS&lt;br/&gt;    BEGIN&lt;br/&gt;      IF(IN_CODARTICULO IS NULL) THEN&lt;br/&gt;        DELETE FROM  t_componentes&lt;br/&gt;        WHERE CODCOMPONENTE = IN_CODCOMPONENTE;&lt;br/&gt;      ELSE&lt;br/&gt;        DELETE FROM  t_componentes&lt;br/&gt;        WHERE CODCOMPONENTE = IN_CODCOMPONENTE AND CODARTICULO = IN_CODARTICULO;&lt;br/&gt;      END IF;&lt;br/&gt;    END;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Obtener Articulos&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_GetArticulos &lt;br/&gt;    IS&lt;br/&gt;          Var_codArticulo VARCHAR2(20);&lt;br/&gt;          Var_descripcion VARCHAR2(40);&lt;br/&gt;          Var_codUnidMed VARCHAR2(40);&lt;br/&gt;          Var_codMarca NUMBER(3);&lt;br/&gt;          Var_modelo VARCHAR2(15);&lt;br/&gt;          Var_fechaReg DATE;&lt;br/&gt;          Var_codFamilia NUMBER(3);&lt;br/&gt;          Var_codEstArticulo NUMBER(3);&lt;br/&gt;          Var_codUserRegistro VARCHAR2(10);&lt;br/&gt;          Var_Cant NUMBER(10);&lt;br/&gt;          Var_CantMax NUMBER(10);&lt;br/&gt;          Var_CantMin NUMBER(10);&lt;br/&gt;          Var_PrecioMerDolar NUMBER(17,2);&lt;br/&gt;          Var_FechaActPrecio DATE;&lt;br/&gt;          &lt;br/&gt;          CURSOR cursorArticulos IS SELECT codigo,descripcion,undMedida,codMarca,modelo,fecRegistro,codFamilia,&lt;br/&gt;          codEstArticulo,codUserRegistro,cantidad,cantMaxima,cantMinima,precioMercDolares,fechaActPrecio FROM t_articulos;&lt;br/&gt;    BEGIN&lt;br/&gt;          open cursorArticulos;&lt;br/&gt;          loop&lt;br/&gt;            fetch cursorArticulos into Var_codArticulo,Var_descripcion,Var_codUnidMed,Var_codMarca,Var_modelo,Var_fechaReg,&lt;br/&gt;            Var_codFamilia,Var_codEstArticulo,Var_codUserRegistro,Var_Cant,Var_CantMax,Var_CantMin,Var_PrecioMerDolar,Var_FechaActPrecio; &lt;br/&gt;            exit when cursorArticulos %notfound;&lt;br/&gt;            --DBMS_OUTPUT.PUT_LINE(Var_descripcion); --solo para verifcar&lt;br/&gt;          end loop;&lt;br/&gt;          close cursorArticulos;&lt;br/&gt;          commit;&lt;br/&gt;    END SP_GetArticulos;&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    -- Obtener Componenetes&lt;br/&gt;    -- -------------------------------------------------------------------------&lt;br/&gt;    Procedure SP_GetComponentes &lt;br/&gt;    IS&lt;br/&gt;          Var_codComponente VARCHAR2(20);&lt;br/&gt;          Var_codArticulo VARCHAR2(20);&lt;br/&gt;          CURSOR cursorComponentes IS SELECT codComponente,codArticulo FROM t_componentes;&lt;br/&gt;    BEGIN&lt;br/&gt;          open cursorComponentes;&lt;br/&gt;          loop&lt;br/&gt;            fetch cursorComponentes into Var_codComponente,Var_codArticulo; &lt;br/&gt;            exit when cursorComponentes %notfound;&lt;br/&gt;            DBMS_OUTPUT.PUT_LINE(Var_codComponente); --solo para verifcar&lt;br/&gt;          end loop;&lt;br/&gt;          close cursorComponentes;&lt;br/&gt;          commit;&lt;br/&gt;    END SP_GetComponentes;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;    -- ============================================================================================&lt;br/&gt;    -- TESTING RETURNS&lt;br/&gt;    -- ============================================================================================&lt;br/&gt;&lt;br/&gt;    FUNCTION FUN_GETARTICULOS_V3 RETURN RECARTICULO&lt;br/&gt;    IS&lt;br/&gt;      LISTAARTICULOS RECARTICULO;&lt;br/&gt;    BEGIN&lt;br/&gt;      OPEN CURARTICULO;&lt;br/&gt;      LOOP&lt;br/&gt;        FETCH CURARTICULO INTO LISTAARTICULOS;&lt;br/&gt;      END LOOP;&lt;br/&gt;      CLOSE CURARTICULO;&lt;br/&gt;      RETURN LISTAARTICULOS;&lt;br/&gt;    END;&lt;br/&gt;    -- ============================================================================================&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;END PKG_Articulo;</source>
</body>
</PackageOracle>